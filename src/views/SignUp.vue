<script>
import axios from "../instanceAxios.js"
import { ref } from 'vue';
import { useRouter } from "vue-router";
import Swal from 'sweetalert2/dist/sweetalert2.js'
import 'sweetalert2/src/sweetalert2.scss'


export default {
    setup() {
        const router = useRouter();
        const first_name = ref("");
        const last_name = ref("");
        const email = ref("");
        const password = ref("");

        const createUser = async () => {
            await axios.get("/sanctum/csrf-cookie");
            await axios.post("/api/register", {
                first_name: first_name.value,
                last_name: last_name.value,
                email: email.value,
                password: password.value,
            });
            Swal.fire("Successfully created account!")
            router.push("/sign-in");
        }

        return {
            first_name,
            last_name,
            email,
            password,
            createUser
        };
    }
}
</script>

<template>
  <div id="app">
    <header>
        <div>
            <svg class="svg-sign" width="421" height="174" viewBox="0 0 421 174" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M142.6 73C150.8 73 159.4 75.6 159.4 82C159.4 82.2 159.4 82 159.4 82.2C159.4 89 149.2 93.4 145.6 102.8L125.4 157.2C121.8 166.8 120.2 171.6 109.2 171.6C98.6 171.6 95.2 169 92.2 160.2L81 126.8L69.2 157.2C65.6 166.8 64.4 171.6 53.2 171.6C42.6 171.6 39 168.8 35.4 160.2L12.6 105.4C8.8 96 -1.19209e-07 92.4 -1.19209e-07 83.6C-1.19209e-07 83.2 -1.19209e-07 83.4 -1.19209e-07 83.2C-1.19209e-07 75.6 8.8 73 26.8 73C41.4 73 55 73.8 55 81.2C55 81.6 55 81.2 55 81.6C55 88.4 48.8 91.6 51.8 100.6L62.2 131.2L79 82C81 76.2 82.6 73 91.4 73C100.4 73 102 75.4 104.6 84.2L118.6 129.2L127.4 102C131.2 90.4 124.6 89.2 124.6 82.8C124.6 82.6 124.6 82.8 124.6 82.6C124.6 75.6 133.8 73 142.6 73ZM235.739 142.6C240.539 140.6 243.739 138.8 246.739 140.8C255.139 146.2 241.739 174 208.339 173C181.139 172.4 157.539 156.2 157.539 123C157.539 95.2 177.939 73.4 205.739 73C233.139 72.6 249.339 90.4 250.939 108.2C252.139 122.4 247.939 125.8 238.739 125.8H196.539C200.339 145.8 222.339 147.6 235.739 142.6ZM208.739 87.6C199.939 87.6 194.739 96.2 194.739 111.4C194.739 111.4 208.939 111.4 212.939 111.4C216.739 111.4 218.939 110 219.339 106.4C220.139 99.8 220.139 87.6 208.739 87.6ZM307.72 142.8C307.72 152.6 314.32 155 314.32 161.8C314.32 162.2 314.32 162 314.32 162.2C314.32 169.6 301.92 171.6 287.32 171.6C272.72 171.6 260.32 169.6 260.32 162.2C260.32 162 260.32 162.2 260.32 161.8C260.32 155 266.92 152.6 266.92 142.8V60.4C266.92 50.8 260.32 48.4 260.32 41.6C260.32 41.2 260.32 41.4 260.32 41.2C260.32 33.8 268.12 28.6 283.52 22.8C296.52 18 307.72 17.6 307.72 29.2C307.72 30.2 307.72 142.8 307.72 142.8ZM368.658 142.8C368.658 152.6 375.258 155 375.258 161.8C375.258 162.2 375.258 162 375.258 162.2C375.258 169.6 362.858 171.6 348.258 171.6C333.658 171.6 321.258 169.6 321.258 162.2C321.258 162 321.258 162.2 321.258 161.8C321.258 155 327.858 152.6 327.858 142.8V60.4C327.858 50.8 321.258 48.4 321.258 41.6C321.258 41.2 321.258 41.4 321.258 41.2C321.258 33.8 329.058 28.6 344.458 22.8C357.458 18 368.658 17.6 368.658 29.2C368.658 30.2 368.658 142.8 368.658 142.8ZM401.842 137.4C411.842 137.4 420.242 144 420.242 155.2C420.242 166.6 411.842 173 401.842 173C391.842 173 383.242 166.6 383.242 155.2C383.242 144 391.842 137.4 401.842 137.4Z" fill="#047857"/>
                <path d="M57.848 40.976C57.848 44.112 60.024 44.88 60.024 47.056C60.024 47.184 60.024 47.12 60.024 47.184C60.024 49.552 55.992 50.192 51.32 50.192C46.648 50.192 42.68 49.552 42.68 47.184C42.68 47.12 42.68 47.184 42.68 47.056C42.68 44.88 44.792 44.112 44.792 40.976V30.864C44.792 26.512 43.896 24.912 41.784 24.912C39.864 24.912 38.648 26.576 38.648 30.672V40.976C38.648 44.112 40.824 44.88 40.824 47.056C40.824 47.184 40.824 47.12 40.824 47.184C40.824 49.552 36.792 50.192 32.12 50.192C27.448 50.192 23.48 49.552 23.48 47.184C23.48 47.12 23.48 47.184 23.48 47.056C23.48 44.88 25.656 44.112 25.656 40.976V30.864C25.656 26.512 24.696 24.912 22.584 24.912C20.728 24.912 19.512 26.512 19.448 30.416V40.976C19.448 44.112 21.624 44.88 21.624 47.056C21.624 47.184 21.624 47.12 21.624 47.184C21.624 49.552 17.592 50.192 12.92 50.192C8.312 50.192 4.28 49.552 4.28 47.184C4.28 47.12 4.28 47.184 4.28 47.056C4.28 44.88 6.456 44.112 6.456 40.976V31.696C6.456 28.624 4.28 27.856 4.28 25.68C4.28 25.552 4.28 25.616 4.28 25.552C4.28 23.184 6.776 21.52 11.704 19.664C15.928 18.128 18.616 18.064 18.616 21.712C18.616 22.224 18.616 22.928 18.616 23.568C20.088 20.688 23.032 18.768 26.296 18.64C31.992 18.384 35.576 20.88 37.368 24.656C38.584 21.136 41.784 18.768 45.432 18.64C53.944 18.256 57.848 23.952 57.848 31.056V40.976ZM87.289 40.912C88.825 40.272 89.849 39.696 90.809 40.336C93.497 42.064 89.209 50.96 78.521 50.64C69.817 50.448 62.265 45.264 62.265 34.64C62.265 25.744 68.793 18.768 77.689 18.64C86.457 18.512 91.641 24.208 92.153 29.904C92.537 34.448 91.193 35.536 88.249 35.536H74.745C75.961 41.936 83.001 42.512 87.289 40.912ZM78.649 23.312C75.833 23.312 74.169 26.064 74.169 30.928C74.169 30.928 78.713 30.928 79.993 30.928C81.209 30.928 81.913 30.48 82.041 29.328C82.297 27.216 82.297 23.312 78.649 23.312ZM130.355 40.976C130.355 44.112 132.531 44.88 132.531 47.056C132.531 47.184 132.531 47.12 132.531 47.184C132.531 49.552 128.499 50.192 123.827 50.192C119.155 50.192 115.187 49.552 115.187 47.184C115.187 47.12 115.187 47.184 115.187 47.056C115.187 44.88 117.363 44.112 117.363 40.976V30.864C117.363 26.512 116.083 24.912 113.843 24.912C111.923 24.912 110.387 26.576 110.323 30.48V40.976C110.323 44.112 112.499 44.88 112.499 47.056C112.499 47.184 112.499 47.12 112.499 47.184C112.499 49.552 108.467 50.192 103.795 50.192C99.123 50.192 95.155 49.552 95.155 47.184C95.155 47.12 95.155 47.184 95.155 47.056C95.155 44.88 97.331 44.112 97.331 40.976V31.696C97.331 28.624 95.155 27.856 95.155 25.68C95.155 25.552 95.155 25.616 95.155 25.552C95.155 23.184 97.651 21.52 102.579 19.664C106.803 18.128 109.491 18.064 109.491 21.712C109.491 22.288 109.491 22.928 109.491 23.632C110.963 20.688 114.099 18.768 117.491 18.64C126.195 18.256 130.355 23.952 130.355 31.056V40.976ZM158.588 40.336C161.34 41.68 157.756 50.64 148.796 50.64C142.012 50.64 137.468 45.84 137.468 38.416V24.784C136.828 24.784 136.38 24.784 136.124 24.784C134.588 24.784 133.18 23.888 133.18 22.096C133.18 19.664 137.34 14.672 142.78 11.536C146.684 9.296 150.46 9.424 150.46 13.072C150.46 14.48 150.46 17.552 150.46 19.664C152.764 19.664 154.684 19.664 155.196 19.664C157.18 19.664 158.14 20.752 158.14 22.224C158.14 23.696 157.18 24.784 155.196 24.784C154.684 24.784 152.764 24.784 150.46 24.784V36.88C150.46 41.744 153.084 41.616 155.068 40.912C156.604 40.272 157.692 39.824 158.588 40.336ZM192.749 38.544C192.749 41.616 195.949 42.384 195.949 44.56C195.949 44.688 195.949 44.624 195.949 44.688C195.949 47.056 194.285 49.36 189.677 50.384C185.837 51.216 182.573 50.256 181.741 47.056C181.613 46.672 181.549 46.288 181.485 45.904C180.141 48.464 177.517 50.64 173.101 50.64C167.725 50.64 162.029 48.336 161.837 42.256C161.517 34.192 167.661 31.696 174.509 31.696C176.429 31.696 178.221 31.696 179.693 31.696V29.072C179.693 24.336 179.309 22.736 177.645 22.48C173.165 21.904 176.173 32.144 167.725 30.544C164.845 30.032 163.693 26 165.933 22.864C168.301 19.6 173.613 18.64 177.837 18.64C183.853 18.64 192.749 21.456 192.749 30.608V38.544ZM176.941 44.56C178.669 44.56 179.693 43.024 179.693 38.864V35.216C179.309 35.216 178.861 35.216 178.413 35.216C175.469 35.216 173.997 37.328 173.997 40.784C173.997 43.728 175.405 44.56 176.941 44.56ZM212.385 40.976C212.385 44.112 214.498 44.88 214.498 47.056C214.498 47.184 214.498 47.12 214.498 47.184C214.498 49.552 210.53 50.192 205.858 50.192C201.186 50.192 197.218 49.552 197.218 47.184C197.218 47.12 197.218 47.184 197.218 47.056C197.218 44.88 199.33 44.112 199.33 40.976V14.608C199.33 11.536 197.218 10.768 197.218 8.592C197.218 8.464 197.218 8.528 197.218 8.464C197.218 6.096 199.714 4.432 204.642 2.576C208.802 1.04 212.385 0.911999 212.385 4.624C212.385 4.944 212.385 40.976 212.385 40.976Z" fill="#047857"/>
            </svg>
        </div>
    </header>
    <div class="w-full max-w-md">
      <form class="px-8 pt-6 pb-4 mb-4" @submit.prevent="createUser">
        <!-- Form -->
        <div>
            <p class="text-center text-2xl font-bold">Create an account</p>
        </div>  
        <div class="mt-4">
          <label>First Name</label>
          <input v-model="first_name" class="shadow appearance-none border border-slate-600 rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"/>
        </div>
        <div class="mt-3">
          <label>Last Name</label>
          <input v-model="last_name" class="shadow appearance-none border border-slate-600 rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"/>
        </div>
        <div class="mt-4">
          <label>Email</label>
          <input v-model="email" type="email" class="shadow appearance-none border border-slate-600 rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"/>
        </div>
        <div class="mt-3">
          <label>Password</label>
          <input v-model="password" type="password" class="shadow appearance-none border border-slate-600 rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"/>
        </div>
        <div class="mt-4">
            <button class="bg-emerald-700 hover:bg-emerald-600 text-white font-bold w-full py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
                Create
            </button>
        </div>
        <div class="mt-3">    
            <RouterLink to="/sign-in" class="text-emerald-700 hover:none">
                <p class="text-center underline hover:no-underline">Back to Sign In</p>
            </RouterLink>
        </div>
      </form>
    </div>
  </div>    
</template>


  
  <style scoped>
  .svg-sign{
    margin-left: 20rem;
  }

  header {
    line-height: 1.5;
    max-height: 100vh;
  }
  
  .logo {
    display: block;
    margin: 0 auto 2rem;
  }
  
  nav {
    width: 100%;
    font-size: 12px;
    text-align: center;
    margin-top: 2rem;
  }
  
  nav a.router-link-exact-active {
    color: var(--color-text);
  }
  
  nav a.router-link-exact-active:hover {
    background-color: transparent;
  }
  
  nav a {
    display: inline-block;
    padding: 0 1rem;
    border-left: 1px solid var(--color-border);
  }
  
  nav a:first-of-type {
    border: 0;
  }

  #app {
    display: grid;
    grid-template-columns: 1fr 1fr;
    padding: 0 2rem;
    margin-top: 15rem;
  }
  
  @media (min-width: 1024px) {

    .svg-sign{
      margin-left: 20rem;
    } 
    header {
      display: flex;
      place-items: center;
      padding-right: calc(var(--section-gap) / 2);
    }
  
    .logo {
      margin: 0 2rem 0 0;
    }
  
    header .wrapper {
      display: flex;
      place-items: flex-start;
      flex-wrap: wrap;
    }
  
    nav {
      text-align: left;
      margin-left: -1rem;
      font-size: 1rem;
  
      padding: 1rem 0;
      margin-top: 1rem;
    }

    #app {
    display: grid;
    grid-template-columns: 1fr 1fr;
    padding: 0 2rem;
    }
  }
  </style>
  
  